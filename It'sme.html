<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spirtoq Linktree</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #000000;
            --card-bg: #1e1f22;
            --card-surface: #2b2d31;
            --primary-color: #5865F2;
            --text-main: #f2f3f5;
            --text-sub: #b5bac1;
            --snake-color: #00ffaa;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column; 
            align-items: center;
            padding: 60px 20px;
            gap: 40px; 
            overflow-x: hidden;
        }

        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .card-wrapper {
            position: relative;
            width: 100%;
            max-width: 400px;
            border-radius: 24px;
            padding: 3px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            overflow: hidden; 
            flex-shrink: 0;
        }

        .card-wrapper::before, .card-wrapper::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent, transparent, transparent, var(--snake-color));
            animation: rotate 4s linear infinite;
            z-index: 0;
        }
        .card-wrapper::after {
            animation-delay: -2s;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .card-content {
            position: relative;
            background: var(--card-bg);
            border-radius: 22px;
            z-index: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        .card-glare {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(105deg, rgba(255,255,255,0) 20%, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0) 30%);
            pointer-events: none;
            z-index: 10;
            animation: glare-anim 6s infinite ease-in-out;
        }

        @keyframes glare-anim {
            0% { transform: translateX(-100%); }
            20% { transform: translateX(100%); }
            100% { transform: translateX(100%); }
        }

        .banner {
            width: 100%;
            height: 140px;
            background-image: url('https://files.catbox.moe/laj0nj.gif');
            background-size: cover;
            background-position: center;
        }

        .profile-section {
            padding: 0 20px;
            margin-top: -50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 6px solid var(--card-bg);
            background-image: url('https://files.catbox.moe/3n70u9.jpg');
            background-size: cover;
            background-position: center;
            box-shadow: 0 4px 14px rgba(0,0,0,0.3);
            position: relative;
        }

        .status-indicator {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 22px;
            height: 22px;
            background-color: #23a559;
            border: 4px solid var(--card-bg);
            border-radius: 50%;
        }

        .username-block { text-align: center; margin-top: 10px; }
        .username-block h1 { font-size: 24px; font-weight: 700; color: var(--text-main); }
        .username-block span { font-size: 14px; color: var(--text-sub); }

        .links-container {
            padding: 0 20px 20px 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .link-btn {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background-color: var(--card-surface);
            border-radius: 12px;
            text-decoration: none;
            color: var(--text-main);
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        .link-btn:hover {
            background-color: #35373c;
            transform: translateY(-2px);
            border-color: rgba(255,255,255,0.1);
        }
        .link-icon { width: 32px; height: 32px; border-radius: 8px; margin-right: 15px; object-fit: contain; }
        .link-text { font-weight: 600; font-size: 16px; }

        .mini-player-hint {
            margin: 0 20px 20px 20px;
            text-align: center;
            font-size: 12px;
            color: var(--text-sub);
            opacity: 0.7;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        .arrow-down { animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-5px);} 60% {transform: translateY(-3px);} }

        .player-content {
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
            position: relative;
            padding: 30px;
            text-align: center;
        }

        .player-bg {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-size: cover;
            background-position: center;
            filter: blur(25px) brightness(0.4);
            z-index: 0;
            transition: background-image 0.5s ease;
        }

        .player-ui {
            position: relative;
            z-index: 2;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .big-cover {
            width: 200px;
            height: 200px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            margin-bottom: 25px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .big-cover:hover { transform: scale(1.03); }

        .song-info { margin-bottom: 25px; width: 100%; }
        .song-title {
            font-size: 22px;
            font-weight: 800;
            color: #fff;
            margin-bottom: 8px;
            line-height: 1.2;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .song-artist {
            font-size: 16px;
            color: rgba(255,255,255,0.7);
            font-weight: 500;
        }

        .source-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            background-color: #ffff64; 
            color: #000;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 800;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(255, 255, 100, 0.3);
        }
        .source-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 255, 100, 0.5);
        }

        .player-status {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0,0,0,0.5);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: bold;
            color: #fff;
            backdrop-filter: blur(5px);
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .live-dot {
            width: 8px; height: 8px; border-radius: 50%; background: #00ffaa;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% {opacity: 1;} 50% {opacity: 0.4;} 100% {opacity: 1;} }

    </style>
</head>
<body>

    <div id="particles-js"></div>

    <div class="card-wrapper">
        <div class="card-content">
            <div class="card-glare"></div>
            <div class="banner"></div>
            
            <div class="profile-section">
                <div class="avatar">
                    <div class="status-indicator"></div>
                </div>
                <div class="username-block">
                    <h1>Spirtoq</h1>
                    <span>Just vibing...</span>
                </div>
            </div>

            <div class="links-container">
                <a href="https://t.me/ExteraSpirtoq" target="_blank" class="link-btn">
                    <img src="https://files.catbox.moe/hfe7zv.png" alt="Telegram" class="link-icon">
                    <span class="link-text">Telegram</span>
                </a>
                <a href="https://Last.fm/user/Spirtoq" target="_blank" class="link-btn">
                    <img src="https://files.catbox.moe/b5tv94.png" alt="LastFM" class="link-icon">
                    <span class="link-text">LastFM</span>
                </a>
                <a href="https://discord.gg/EkyNTSzQ" target="_blank" class="link-btn">
                    <img src="https://files.catbox.moe/s4qrcp.png" alt="Discord" class="link-icon">
                    <span class="link-text">Discord</span>
                </a>
                <a href="https://shikimori.one/SpirtoQ" target="_blank" class="link-btn">
                    <img src="https://files.catbox.moe/inwllg.png" alt="Shikimori" class="link-icon">
                    <span class="link-text">Shikimori</span>
                </a>
            </div>

            <div class="mini-player-hint">
                <span>Scroll down for music card</span>
                <span class="arrow-down">â–¼</span>
            </div>
        </div>
    </div>

    <div class="card-wrapper" id="big-player-wrapper" style="opacity: 0; transition: opacity 1s;">
        <div class="card-content player-content">
            <div class="card-glare"></div>
            
            <div class="player-bg" id="player-bg"></div>
            
            <div class="player-status">
                <div class="live-dot" id="player-dot"></div>
                <span id="player-status-text">OFFLINE</span>
            </div>

            <div class="player-ui">
                <img src="" alt="Cover" class="big-cover" id="big-cover">
                
                <div class="song-info">
                    <div class="song-title" id="big-title">Loading...</div>
                    <div class="song-artist" id="big-artist">...</div>
                </div>

                <a href="#" target="_blank" class="source-btn" id="genius-link">
                    Open on Genius
                </a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 60, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": "#ffffff" },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.3, "random": true },
                "size": { "value": 3, "random": true },
                "line_linked": { "enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.2, "width": 1 },
                "move": { "enable": true, "speed": 2 }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": { "onhover": { "enable": true, "mode": "grab" } },
                "modes": { "grab": { "distance": 140, "line_linked": { "opacity": 0.5 } } }
            },
            "retina_detect": true
        });

        const apiKey = '460cda35be2fbf4f28e8ea7a38580730';
        const user = 'Spirtoq';
        const url = `https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${user}&api_key=${apiKey}&format=json&limit=1`;

        const playerWrapper = document.getElementById('big-player-wrapper');
        const bgLayer = document.getElementById('player-bg');
        const bigCover = document.getElementById('big-cover');
        const bigTitle = document.getElementById('big-title');
        const bigArtist = document.getElementById('big-artist');
        const geniusLink = document.getElementById('genius-link');
        const statusText = document.getElementById('player-status-text');
        const statusDot = document.getElementById('player-dot');

        async function fetchLastFM() {
            try {
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.recenttracks && data.recenttracks.track.length > 0) {
                    const track = data.recenttracks.track[0];
                    const isPlaying = track['@attr'] && track['@attr'].nowplaying === 'true';

                    let imgUrl = 'https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png';
                    if (track.image && track.image.length > 0) {
                        const bestImg = track.image.find(i => i.size === 'extralarge') || track.image[track.image.length - 1];
                        if (bestImg['#text']) imgUrl = bestImg['#text'];
                    }

                    playerWrapper.style.opacity = '1';
                    bgLayer.style.backgroundImage = `url('${imgUrl}')`;
                    bigCover.src = imgUrl;
                    bigTitle.innerText = track.name;
                    bigArtist.innerText = track.artist['#text'];

                    if (isPlaying) {
                        statusText.innerText = "NOW PLAYING";
                        statusText.style.color = "#fff";
                        statusDot.style.background = "#00ffaa";
                        statusDot.style.display = "block";
                    } else {
                        statusText.innerText = "LAST PLAYED";
                        statusText.style.color = "#ccc";
                        statusDot.style.background = "#ccc";
                        statusDot.style.display = "block";
                    }

                    const query = encodeURIComponent(`${track.artist['#text']} ${track.name}`);
                    geniusLink.href = `https://genius.com/search?q=${query}`;
                }
            } catch (error) {
                console.error('LastFM Error:', error);
            }
        }

        fetchLastFM();
        setInterval(fetchLastFM, 15000);
    </script>
</body>
</html>
